<!DOCTYPE html>
<html>
<head>
    <title>A/B Choice</title>
    <style>
        :root {
            --neither-size: 200px;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: sans-serif; height: 100vh; }
        .container { display: flex; height: calc(100vh - var(--neither-size)); }
        .option { flex: 1; display: flex; align-items: center; justify-content: center; }
        .option form { width: 100%; height: 100%; }
        .option button {
            width: 100%; height: 100%;
            font-size: 2rem; cursor: pointer;
            border: none; background: #f0f0f0;
            transition: background 0.2s;
        }
        .option button:hover { background: #e0e0e0; }
        .option:first-child button { border-right: 2px solid #ccc; }
        .instructions {
            position: fixed; top: 0; left: 0; right: 0;
            background: #333; color: white;
            padding: 10px 20px; text-align: center;
            font-size: 0.9rem; z-index: 100;
        }
        .manual-input {
            position: fixed; bottom: 20px; left: 50%;
            transform: translateX(-50%);
            display: flex; gap: 10px;
            background: white; padding: 10px; border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .manual-input input { padding: 8px; font-size: 1rem; }
        .manual-input button { padding: 8px 16px; cursor: pointer; }
        .neither { width: 100%; height: var(--neither-size); }
        .neither form { width: 100%; height: 100%; }
        .neither button {
            width: 100%; height: 100%;
            font-size: 1rem; cursor: pointer;
            border: none; background: #ddd;
            border-top: 2px solid #ccc;
            transition: background 0.2s;
        }
        .neither button:hover { background: #ccc; }
    </style>
</head>
<body>
    <div class="instructions">
        {% if step == 1 %}
        Step 1: Choose the option you prefer. Your selections help discover the best choices.
        {% else %}
        Step 2: Pick your favorite from previous winners. The winner continues to the next round.
        {% endif %}
    </div>
    <div class="container">
        <div class="option">
            <form method="post" action="{% url 'select' %}">
                {% csrf_token %}
                <input type="hidden" name="selected" value="{{ option_a.id }}">
                <input type="hidden" name="rejected" value="{{ option_b.id }}">
                <input type="hidden" name="position" value="0">
                <button type="submit">{{ option_a.text }}</button>
            </form>
        </div>
        <div class="option">
            <form method="post" action="{% url 'select' %}">
                {% csrf_token %}
                <input type="hidden" name="selected" value="{{ option_b.id }}">
                <input type="hidden" name="rejected" value="{{ option_a.id }}">
                <input type="hidden" name="position" value="1">
                <button type="submit">{{ option_b.text }}</button>
            </form>
        </div>
    </div>
    {% if step == 1 %}
    <div class="neither">
        <form method="post" action="{% url 'neither' %}">
            {% csrf_token %}
            <input type="hidden" name="option_a" value="{{ option_a.id }}">
            <input type="hidden" name="option_b" value="{{ option_b.id }}">
            <button type="submit">Neither</button>
        </form>
    </div>
    {% endif %}
    {% if show_manual_input %}
    <div class="manual-input">
        <form method="post" action="{% url 'submit_manual' %}">
            {% csrf_token %}
            <input type="text" name="text" placeholder="Enter your own option">
            <button type="submit">Submit</button>
        </form>
    </div>
    {% endif %}
</body>
</html>
